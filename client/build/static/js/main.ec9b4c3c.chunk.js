(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1400:function(e,t,o){"use strict";o.r(t);var n=o(19),a=o.n(n),i=o(509),r=o.n(i),c=(o(515),o(37)),s=o(70),h=o(72),p=o(71),l=o(73),d=o(15),u=(o(516),function(e){function t(e){var o;return Object(c.a)(this,t),(o=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={joyAreaLeft:window.joystickManager.props.x,joyAreaTop:window.joystickManager.props.y,joyAreaWidth:window.joystickManager.props.w,joyAreaHeight:window.joystickManager.props.h},o}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.joystick=this}},{key:"getAreaBoundsX",value:function(){return 50}},{key:"getAreaBoundsY",value:function(){return 50}},{key:"setJoystickPos",value:function(e,t){this.setState({stickLeft:e-this.state.stickWidth/2,stickTop:t-this.state.stickHeight/2})}},{key:"resetJoystickPos",value:function(){this.setState({stickLeft:47.5,stickTop:window.innerHeight-77.5})}},{key:"render",value:function(){return a.a.createElement("div",{id:"joystick-circle",style:{left:this.state.joyAreaLeft,top:this.state.joyAreaTop,width:this.state.joyAreaWidth,height:this.state.joyAreaHeight}})}}]),t}(n.Component)),w=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={areaLeft:window.aimAreaManager.props.left,areaTop:window.aimAreaManager.props.top,areaWidth:window.aimAreaManager.props.width,areaHeight:window.aimAreaManager.props.height,centerX:window.aimAreaManager.props.centerX,centerY:window.aimAreaManager.props.centerY,projLeft:0,projRight:0},e.onTouchEnd=e.onTouchEnd.bind(Object(d.a)(Object(d.a)(e))),e.onTouchMove=e.onTouchMove.bind(Object(d.a)(Object(d.a)(e))),e.onTouchStart=e.onTouchStart.bind(Object(d.a)(Object(d.a)(e))),e}return Object(l.a)(t,e),Object(s.a)(t,[{key:"onTouchEnd",value:function(e){e.stopPropagation();var t=e.changedTouches,o=t[0].pageX-this.state.centerX,n=t[0].pageY-this.state.centerY,a=o/(this.state.areaWidth/2),i=n/(this.state.areaHeight/2);console.log("normalizedX: "+a),console.log("normalizedY: "+i);var r=1/(Math.abs(a)+Math.abs(i));console.log("ratio: "+r),a*=Math.abs(r),i*=Math.abs(r),console.log("normalized new values, x: "+a+" y: "+i);var c=window.innerWidth/2+100*a,s=window.innerHeight/2+100*i;this.setState({projLeft:c,projTop:s})}},{key:"onTouchMove",value:function(e){e.stopPropagation()}},{key:"onTouchStart",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"aim-area",onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,style:{top:this.state.areaTop,left:this.state.areaLeft,width:this.state.areaWidth,height:this.state.areaHeight}}),a.a.createElement("div",{id:"aim-dot",style:{left:this.state.centerX-1,top:this.state.centerY-1,width:2,height:2}}),a.a.createElement("div",{id:"aim-projectile",style:{left:this.state.projLeft,top:this.state.projTop,width:2,height:2}}),a.a.createElement("div",{id:"center-dot",style:{left:window.innerWidth/2,top:window.innerHeight/2,width:2,height:2}}))}}]),t}(n.Component),g=function(e){function t(e){var o;return Object(c.a)(this,t),(o=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={},o.onTouchCancel=o.onTouchCancel.bind(Object(d.a)(Object(d.a)(o))),o.onTouchEnd=o.onTouchEnd.bind(Object(d.a)(Object(d.a)(o))),o.onTouchMove=o.onTouchMove.bind(Object(d.a)(Object(d.a)(o))),o.onTouchStart=o.onTouchStart.bind(Object(d.a)(Object(d.a)(o))),o}return Object(l.a)(t,e),Object(s.a)(t,[{key:"getJoystickCenterPos",value:function(){}},{key:"onTouchCancel",value:function(e){e.stopPropagation(),console.log("onTouchCancel")}},{key:"onTouchEnd",value:function(e){e.stopPropagation(),console.log("onTouchEnd")}},{key:"onTouchMove",value:function(e){e.stopPropagation(),console.log("onTouchMove")}},{key:"onTouchStart",value:function(e){e.stopPropagation(),console.log("onTouchStart")}},{key:"render",value:function(){a.a.createElement("div",{className:"App",onTouchCancel:this.onTouchCancel,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart});return a.a.createElement("div",{className:"App"},a.a.createElement(u,null),a.a.createElement(w,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=o(120),v=function(e){function t(e){var o;return Object(c.a)(this,t),o=Object(h.a)(this,Object(p.a)(t).call(this,{key:"MainScene"})),window.mainScene=Object(d.a)(Object(d.a)(o)),o.posSendTimer=0,o.characters={},o.myCharacter=null,o.NPCs={},o.projectiles={},o.playerToMove={x:0,y:0},o}return Object(l.a)(t,e),Object(s.a)(t,[{key:"preload",value:function(){this.load.spritesheet("player","./assets/initialspritesheet.png",{frameWidth:17,frameHeight:19}),console.log("in mainscene")}},{key:"resize",value:function(e,t){void 0===e&&(e=this.sys.game.config.width),void 0===t&&(t=this.sys.game.config.height),this.cameras.resize(e,t),console.log("resized!")}},{key:"create",value:function(){this.player=this.add.sprite(window.innerWidth/2,window.innerHeight/2,"player");var e=this.add.graphics({lineStyle:{width:2,color:11141120},fillStyle:{color:12698049,alpha:.3}});e.fillRect(window.innerWidth/2-11,window.innerHeight/2-11,24,24),e.fillRoundedRect(window.joystickManager.props.x,window.joystickManager.props.y,window.joystickManager.props.w,window.joystickManager.props.h,window.joystickManager.props.w/2),console.log("created mainScene")}},{key:"update",value:function(e,t){t/=1e3,0!==this.playerToMove.x&&(this.player.x+=this.playerToMove.x*t*50),0!==this.playerToMove.y&&(this.player.y+=this.playerToMove.y*t*50),this.cameras.main.startFollow(this.player)}}]),t}(y.Scene),f={type:y.WEBGL,pixelArt:!0,parent:"phaser-content",width:window.innerWidth,height:window.innerHeight,physics:{default:"arcade"},scene:[v]},j=new y.Game(f);window.main=j,window.mainScene=j.scene.keys.MainScene,window.joystickManager=new function e(){Object(c.a)(this,e),this.props={x:25,y:window.innerHeight-75-25,w:75,h:75},this.props.centerX=this.props.x+this.props.w/2,this.props.centerY=this.props.y+this.props.h/2},window.aimAreaManager=new function e(){Object(c.a)(this,e),this.props={top:window.innerHeight-145,left:window.innerWidth-145,width:120,height:120},this.props.centerX=this.props.left+this.props.width/2,this.props.centerY=this.props.top+this.props.height/2},r.a.render(a.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()});var m=!1,T=function(e,t){var o=e-window.joystickManager.props.centerX,n=t-window.joystickManager.props.centerY,a=Math.sqrt(o*o+n*n);if(a>window.joystickManager.props.w/2){var i=a/window.joystickManager.props.w;o/=i,n/=i}var r=o/(window.joystickManager.props.w/2),c=n/(window.joystickManager.props.h/2);window.mainScene.playerToMove.x=r,window.mainScene.playerToMove.y=c},k=function(){console.log("stopping joy movement"),window.mainScene.playerToMove.x=0,window.mainScene.playerToMove.y=0},b=function(e){e.preventDefault();for(var t=e.changedTouches,o=0;o<t.length;o++)t[o].pageX<300&&T(t[o].pageX,t[o].pageY),m||(m=!0)},M=function(e){e.preventDefault();for(var t=e.changedTouches,o=0;o<t.length;o++)t[o].pageX<300?T(t[o].pageX,t[o].pageY):k()};window.addEventListener("load",function(){window.scrollTo(0,1),console.log("load called"),function(){var e=document.getElementById("root");e.addEventListener("touchstart",b,!1),e.addEventListener("touchmove",M,!1),e.addEventListener("touchend",function(e){e.preventDefault(),console.log("end"),k()},!1)}(),console.log("x: "+window.innerWidth+"y: "+window.innerHeight)})},510:function(e,t,o){e.exports=o(1400)},515:function(e,t,o){},516:function(e,t,o){}},[[510,1,2]]]);
//# sourceMappingURL=main.ec9b4c3c.chunk.js.map